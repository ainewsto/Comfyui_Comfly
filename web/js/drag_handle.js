export const dragHandle={createButton(e,t){const n=document.createElement("div");n.style.position="relative",n.style.cursor="move",n.classList.add("comfly-main-button");const s=document.createElement("button");return s.style.backgroundImage="url('https://api.comfly.chat/wp-content/uploads/2024/09/Comfly-t拷贝-3.png')",s.style.backgroundSize="cover",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="center",s.textContent="",s.style.width="38px",s.style.height="38px",s.style.padding="10px",s.style.borderRadius="50%",s.style.margin="5px",s.style.backgroundColor="transparent",s.style.border="none",s.style.boxShadow="0 0 10px 8px rgba(255, 253, 1, 0.7)",s.style.transition="transform 0.2s, box-shadow 0.2s",s.style.animation="flame 1.5s infinite alternate",n.appendChild(s),n.addEventListener("mouseover",(()=>{s.style.transition="transform 0.5s ease",s.style.transform="rotate(360deg)"})),n.addEventListener("mouseout",(()=>{s.style.transform="rotate(0deg)"})),n.addEventListener("mousedown",(()=>{s.style.transform="scale(0.95)",s.style.boxShadow="0 0 6px 5px rgba(255, 253, 1, 0.7)"})),n.addEventListener("mouseup",(()=>{s.style.transform="scale(1)",s.style.boxShadow="0 0 12px 8px rgba(255, 253, 1, 0.7)"})),n.addEventListener("click",(()=>{"none"===t.style.display?this.showContainer(t):this.hideContainer(t)})),this.makeDraggable(e,n),n.style.display="flex",t.style.display="none",n},hideContainer(e){e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),500)},showContainer(e){e.style.display="flex",e.style.opacity=0,e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.style.opacity=1}),10)},makeDraggable(e,t){let n,s,o,a,r=!1,d=0,i=0;const l=e=>{"touchstart"===e.type?(o=e.touches[0].clientX-d,a=e.touches[0].clientY-i):(o=e.clientX-d,a=e.clientY-i),(e.target===t||t.contains(e.target))&&(r=!0)},c=e=>{o=n,a=s,r=!1},y=t=>{r&&(t.preventDefault(),"touchmove"===t.type?(n=t.touches[0].clientX-o,s=t.touches[0].clientY-a):(n=t.clientX-o,s=t.clientY-a),d=n,i=s,u(n,s,e))},u=(e,t,n)=>{n.style.transform=`translate3d(${e}px, ${t}px, 0)`};let m;const p=(e,t)=>{m||(m=!0,setTimeout((()=>{e(),m=!1}),t))};t.addEventListener("mousedown",l),t.addEventListener("touchstart",l),document.addEventListener("mousemove",(e=>{p((()=>y(e)),10)})),document.addEventListener("touchmove",(e=>{p((()=>y(e)),10)})),document.addEventListener("mouseup",c),document.addEventListener("touchend",c)}};const style=document.createElement("style");style.textContent="\n@keyframes flame {\n    0% {\n        box-shadow: 0 0 8px 3px rgba(255, 253, 1, 0.5);\n    }\n    100% {\n        box-shadow: 0 0 8px 5px rgba(255, 165, 0, 0.7);\n    }\n}\n",document.head.append(style);let isAPressed=!1;document.addEventListener("keydown",(e=>{if("a"===e.key.toLowerCase()&&(isAPressed=!0),isAPressed&&"s"===e.key.toLowerCase()){e.preventDefault();const t=document.querySelector(".comfly-main-button");t&&dragHandle.showContainer(t)}if(isAPressed&&"x"===e.key.toLowerCase()){e.preventDefault();const t=document.querySelector(".comfly-main-button");t&&dragHandle.hideContainer(t)}})),document.addEventListener("keyup",(e=>{"a"===e.key.toLowerCase()&&(isAPressed=!1)}));
